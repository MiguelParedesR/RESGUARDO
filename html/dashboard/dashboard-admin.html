<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard Administrador</title>

    <!-- MDL -->
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css" />
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Estilos -->
    <link rel="stylesheet" href="/css/dashboard/dashboard-admin.css" />

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script defer src="/config.js"></script>

    <!-- Lógica -->
    <script defer src="/js/dashboard/dashboard-admin.js"></script>
    <script defer src="/js/pwa.js"></script>

</head>

<body class="mdl-base sidebar-open">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <span class="mdl-layout-title">Administrador</span>
                <div class="mdl-layout-spacer"></div>
                <a class="mdl-button mdl-js-button" href="/html/login/login.html">Salir</a>
            </div>
        </header>

        <main class="mdl-layout__content">
            <section class="page">
                <!-- TOPBAR -->
                <div class="topbar">
                    <button id="btn-toggle" class="btn btn-ghost"><i class="material-icons">menu</i> Lista</button>

                    <div class="field">
                        <label class="lbl">Estado</label>
                        <select id="f-estado" class="select">
                            <option value="TODOS">Todos</option>
                            <option value="ACTIVO" selected>Activo</option>
                            <option value="FINALIZADO">Finalizado</option>
                        </select>
                    </div>

                    <div class="field">
                        <label class="lbl">Empresa</label>
                        <select id="f-empresa" class="select">
                            <option value="TODAS">Todas</option>
                            <option value="ALVICEM">ALVICEM</option>
                            <option value="KARPAR">KARPAR</option>
                        </select>
                    </div>

                    <div class="field" style="flex:1; min-width:220px;">
                        <label class="lbl">Buscar</label>
                        <input id="f-texto" class="input" type="text" placeholder="Cliente, placa…" />
                    </div>

                    <button id="btn-aplicar" class="btn btn-ghost"><i class="material-icons">filter_list</i>
                        Aplicar</button>
                    <button id="btn-reset" class="btn btn-ghost"><i class="material-icons">refresh</i> Limpiar</button>
                </div>

                <!-- SPLIT: sidebar + mapa -->
                <div class="split">
                    <!-- Sidebar -->
                    <aside class="sidebar">
                        <div class="sidebar-head">
                            <div class="lbl" style="font-size:14px;font-weight:800;color:#37474f;">Servicios</div>
                            <span class="lbl" id="count-label">0</span>
                        </div>
                        <div id="listado" class="sidebar-body">
                            <div class="card">Cargando…</div>
                        </div>
                    </aside>

                    <!-- Panel de mapa -->
                    <section class="map-panel">
                        <div class="map-head">
                            <div class="map-title" id="map-title">Selecciona un servicio</div>
                            <div class="map-metrics">
                                <span><strong>Ping:</strong> <span id="metric-ping">—</span></span>
                                <span><strong>Estado:</strong> <span id="metric-estado">—</span></span>
                            </div>
                        </div>
                        <div id="map-admin"></div>
                        <div class="details" id="details">
                            <div><strong>Empresa:</strong> —</div>
                            <div><strong>Cliente:</strong> —</div>
                            <div><strong>Placa:</strong> —</div>
                            <div><strong>Tipo:</strong> —</div>
                            <div><strong>Destino:</strong> —</div>
                            <div><button id="btn-finalizar"
                                    class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent"
                                    disabled>Finalizar servicio</button></div>
                        </div>
                    </section>
                </div>

                <!-- Snackbar -->
                <div id="app-snackbar" class="mdl-js-snackbar mdl-snackbar" aria-live="polite">
                    <div class="mdl-snackbar__text"></div>
                    <button class="mdl-snackbar__action" type="button"></button>
                </div>
            </section>
        </main>
    </div>
</body>

</html>