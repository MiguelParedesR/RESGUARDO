<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Mis servicios - Custodia</title>
  <link rel="icon" href="/assets/icon-192.svg" type="image/svg+xml" />
  <link rel="manifest" href="/manifest.json" />

  <!-- ICONOS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

  <!-- CSS MODERNO -->
  <link rel="stylesheet" href="../../css/dashboard/custodia-registros.css" />
  <link rel="stylesheet" href="../../css/partials/app-header.css" />
  <link rel="stylesheet" href="../../modules/alarma/alarma.css" />

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script defer src="../../config.js"></script>
  <script defer src="../../js/lib/permissions.js"></script>
  <script defer src="../../js/guard.js"></script>
  <script defer src="../../modules/alarma/alarma.js"></script>
  <script defer src="../../js/lib/app-header.js"></script>
  <script defer src="../../js/lib/custodia-session.js"></script>
  <script defer src="../../js/dashboard/custodia-registros.js"></script>
  <script defer src="../../js/pwa.js"></script>
</head>
<script>
sessionStorage.setItem("auth_role", "CUSTODIA");
</script>

<body class="light-body">

  <!-- HEADER -->
  <div id="app-header" data-page-title="Mis servicios" data-nav="CUSTODIA"></div>

  <main class="custodia-main-wrapper">

    <section class="page page--custodia">

      <div class="layout-custodia layout-custodia--sidebar">

        <!-- ============================================
             SIDEBAR CLIENTES
        ============================================ -->
        <aside class="custodia-panel modern-light-panel">

          <div class="panel-head">
            <p class="panel-eyebrow">Directorio</p>
            <h2 class="panel-title">Clientes</h2>
            <p class="panel-hint">Selecciona un cliente para ver sus servicios activos.</p>
          </div>

          <!-- Buscador -->
          <div class="cliente-search enhanced-search">

            <label for="cliente-search" class="cliente-search__label">Cliente (carga)</label>

            <div id="cliente-search-field" class="cliente-search__field search-field-light" role="combobox"
              aria-haspopup="listbox" aria-expanded="false" aria-owns="cliente-results">

              <i class="material-icons search-icon">search</i>

              <input id="cliente-search" type="search" autocomplete="off" enterkeyhint="search"
                placeholder="Escribe para buscar cliente" aria-controls="cliente-results" aria-autocomplete="list" />

              <button id="cliente-clear" class="icon-btn icon-btn--ghost" type="button" aria-label="Limpiar">
                <i class="material-icons">clear</i>
              </button>
            </div>

            <p id="cliente-feedback" class="cliente-search__feedback" aria-live="polite"></p>

            <ul id="cliente-results" class="cliente-search__results" role="listbox"></ul>

          </div>

        </aside>

        <!-- ============================================
             MAIN CONTENT — SERVICIOS
        ============================================ -->
        <div class="custodia-main modern-light-main">

          <!-- TOPBAR -->
          <div class="topbar clean-topbar">
            <div class="titles">
              <h1 class="top-title">Mis servicios</h1>
              <p class="subtitle">Selecciona un cliente para ver sus servicios activos.</p>
            </div>

            <button class="topbar__cta" onclick="location.href='/html/dashboard/dashboard-custodia.html'">
              + Nuevo servicio
            </button>
          </div>

          <!-- GRID -->
          <section class="custodia-panel custodia-panel--services modern-services">

            <div id="cards-placeholder" class="cards-placeholder">
              Selecciona un cliente para visualizar los servicios disponibles.
            </div>

            <div id="cards-custodia" class="cards-grid"></div>
          </section>

        </div>

      </div>

      <!-- ==========================================================
           MODAL — AGREGAR CUSTODIA
      ========================================================== -->
      <section id="modal-add-custodia" class="light-modal" aria-hidden="true">

        <div class="add-modal__backdrop" data-add-close></div>

        <div class="light-modal-card" role="dialog" aria-modal="true" aria-labelledby="add-modal-title">

          <header class="light-modal-head">
            <h3 id="add-modal-title">Agregar custodia</h3>
            <button class="light-modal-close" data-add-close><i class="material-icons">close</i></button>
          </header>

          <div class="light-modal-body">

            <p id="add-modal-description" class="modal-description-light">
              Selecciona el tipo de custodia que realizarás.
            </p>

            <div class="add-modal__options" role="radiogroup">

              <label class="option-light">
                <input type="radio" name="add-tipo" value="Simple" checked />
                <span class="option__body">
                  <span class="option__title">Custodia simple</span>
                  <span class="option__hint">Custodia en cabina</span>
                </span>
              </label>

              <label class="option-light">
                <input type="radio" name="add-tipo" value="Tipo A" />
                <span class="option__body">
                  <span class="option__title">Custodia Tipo A</span>
                  <span class="option__hint">Custodia en vehículo</span>
                </span>
              </label>

              <label class="option-light">
                <input type="radio" name="add-tipo" value="Tipo B" />
                <span class="option__body">
                  <span class="option__title">Custodia Tipo B</span>
                  <span class="option__hint">1 cabina + 1 vehículo</span>
                </span>
              </label>

            </div>
          </div>

          <footer class="light-modal-actions">
            <button class="light-btn-secondary" data-add-close>Cancelar</button>
            <button id="add-modal-confirm" class="light-btn-primary">Confirmar</button>
          </footer>

        </div>
      </section>

      <!-- ==========================================================
           MODAL — RUTA CLIENTE
      ========================================================== -->
      <section id="modal-ruta-cliente" class="light-modal" aria-hidden="true">
        <div class="route-modal__backdrop" data-route-close></div>

        <div class="light-modal-card" role="dialog" aria-modal="true">
          <header class="light-modal-head">
            <h3>Ruta asignada</h3>
            <button class="light-modal-close" data-route-close><i class="material-icons">close</i></button>
          </header>

          <div class="light-modal-body">
            <p class="route-modal__lead">Tu ruta asignada es:</p>
            <p id="route-modal-name" class="modal-route-light"></p>
            <p id="route-modal-desc" class="modal-desc-light" hidden></p>
          </div>

          <footer class="light-modal-actions">
            <button class="light-btn-primary" data-route-close>Entendido</button>
          </footer>
        </div>
      </section>

      <!-- ==========================================================
           MODAL — NUEVO CLIENTE
      ========================================================== -->
      <section id="modal-cliente-nuevo" class="light-modal" aria-hidden="true">
        <div class="route-modal__backdrop" data-cliente-close></div>

        <div class="light-modal-card" role="dialog" aria-modal="true">
          <header class="light-modal-head">
            <h3>Nuevo cliente</h3>
            <button class="light-modal-close" data-cliente-close><i class="material-icons">close</i></button>
          </header>

          <div class="light-modal-body">
            <label for="cliente-nombre" class="modal-label-light">Nombre del cliente</label>

            <input id="cliente-nombre" type="text" class="modal-input-light" placeholder="Ej. Ripley" maxlength="120" />

            <p id="cliente-modal-feedback" class="modal-feedback-light"></p>
          </div>

          <footer class="light-modal-actions">
            <button class="light-btn-secondary" data-cliente-close>Cancelar</button>
            <button id="cliente-modal-save" class="light-btn-primary">Guardar cliente</button>
          </footer>

        </div>
      </section>

    </section>

    <!-- SNACKBAR PROPIO -->
    <div id="app-snackbar" class="snackbar-light">
      <span class="snackbar-text"></span>
    </div>

  </main>

</body>

</html>